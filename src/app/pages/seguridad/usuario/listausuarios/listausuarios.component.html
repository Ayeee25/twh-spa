
<div class="page-head">
    <h2 class="page-head-title">Mantenimiento de Usuarios </h2>
    <!-- <nav aria-label="breadcrumb" role="navigation">
      <ol class="breadcrumb page-head-nav">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item active">Listado de Usuarios</li>
      </ol>
    </nav> -->
  </div>

<div class="main-content container-fluid">
<div class="col-md-12">


    <div class="card card-border-color card-border-color-primary">
      <div class="card-header card-header-divider">
          
       <div class="row">
            <b> Listado de Usuarios     </b> 
             <!-- <span class="card-subtitle">   Usuarios registrados en el sistema</span> -->
          </div>
        </div>
   
      <div class="card-body">
          <div  class="mat-elevation-z8">

            <p-table [columns]="cols" 
            [scrollable]="true"  [style]="{width:'100%'}" [(selection)]="selectedRow"
            [value]="users" #dt [paginator]="true" selectionMode="single"
            [loading]="loading"
            (onLazyLoad)="loadCarsLazy($event)"
             [rows]="20" [resizableColumns]="true" [responsive]="true">

            <ng-template pTemplate="colgroup" let-columns>
              <colgroup>
                  <col *ngFor="let col of columns"   [ngStyle]="{'width': col.width}" >
              </colgroup>
            </ng-template>
            <ng-template pTemplate="header" let-columns>
              <tr>
                  <th  [ngStyle]="{'width': col.width}" *ngFor="let col of columns" pResizableColumn [pSortableColumn]="col.field">
                      {{col.header}}
                      <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                  </th>
              </tr>
              <tr>
                  <th *ngFor="let col of columns" [ngSwitch]="col.field">
                      <input style="width:70%" *ngSwitchCase="'username'" pInputText type="text" (input)="dt.filter($event.target.value, col.field, 'contains')">
                  </th>
               </tr>
          </ng-template>
          <ng-template pTemplate="body" let-rowData let-columns="columns">
            <tr  [pSelectableRow]="rowData">
                <!-- <td *ngIf="rowGroupMetadata[rowData.brand].index === rowIndex" [attr.rowspan]="rowGroupMetadata[rowData.brand].size">
                    {{rowData.fecha_incidencia}}
                </td> -->
                <td class="ui-resizable-column">  
                  <div class="ui-inputgroup">
                    <!-- <button class="ui-button-secondary" type="button"  pButton (click)="ver(rowData.id)" icon="fa fa-search"></button>
                    <button class="ui-button-secondary" type="button"  pButton (click)="edit(rowData.id)" icon="fa fa-edit"></button> -->
                    <button class="ui-button-secondary" pButton  (click)="openDialog(rowData.id)" type="button" icon="fa fa-address-book-o"></button>
                    <button class="ui-button-secondary" pButton  (click)="edit(rowData.id)"  type="button" icon="fa fa-edit"></button>
                    <button class="ui-button-secondary" pButton (click)="eliminar(rowData.id)"  type="button" icon="fa fa-trash"> </button>
                    <button class="ui-button-secondary" pButton (click)="cambiarpassword(rowData.id)"  type="button" icon="fa fa-user-circle"> </button>
                  </div>
              </td>
                <td class="ui-resizable-column"> {{rowData.id }}</td> 
                <td class="ui-resizable-column"> {{rowData.username}} </td>
                <td class="ui-resizable-column"> {{rowData.nombreCompleto  }}</td>
                <td class="ui-resizable-column"> {{rowData.email}} </td>
                <td class="ui-resizable-column"> {{rowData.dni}}</td>
                <td class="ui-resizable-column"> {{rowData.lastActive | date: 'dd-MM-yyyy'  }}  </td>
                <td  [ngClass]="rowData.nombreEstado == 'Habilitado' ? 'old-car' :  (rowData.nombreEstado == 'No Habilitado '?'very-old-car': null) "> {{rowData.nombreEstado}}</td>
                <td  [ngClass]="rowData.enLinea  ? 'old-car' :  'very-old-car'"> {{rowData.enLinea ? "Online" : "Offline"}} </td>
                
            
  
            </tr>
            </ng-template>

            </p-table>

            <div class="example-button-row">
              <button mat-fab color="primary" ngbTooltip="Nuevo Usuario del Sistema" routerLink="/seguridad/nuevousuario"> <i aria-hidden="true" class="fa fa-plus fa-1x"></i></button>
              </div>

            </div>
      </div>
    </div>
  </div>
</div>

<!-- [template]="customLoadingTemplate" -->
